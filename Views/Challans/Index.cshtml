@model GoodLuck.Models.ChallanViewModel
@{
    ViewBag.Title = "Index";
}
<style>
    th {
        text-align: center;
    }
</style>
@if (TempData["message"] != null)
{
    <div class="alert alert-success alert-dismissable fade in">
        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
        <strong>@TempData["message"].ToString()</strong>
    </div>
}
<div class="row">
    <div class="col col-xs-6" style="text-align:left;"><h4>Challans</h4></div>
    <div class="col col-xs-6" style="text-align:right;padding-top:10px;">
        @Html.ActionLink("Add Challan", "Create", null, new { @class = "btn btn-primary" })
    </div>
</div>
<div class="row">
    <div class="col-xs-12">
        <label class="control-label" for="ddlCustomer">Customer :&nbsp;</label>
        @*@Html.DropDownList("ddlCustomer", Model.Customers, "--Select Customer--", new { @class = "form-control", style = "display:inline;", onChange = "changeCustomer();" })*@
        @Html.DropDownListFor(x => x.Customer, Model.Customers, "--Select Customer--", new { @class = "form-control", style = "display:inline;", onChange = "changeCustomer(this.value);" })
    </div>
</div>
<div class="row" style="padding-top:10px;">
    <div class="col-xs-12">
        <table class="table table-condensed table-bordered">
            <tr>
                <th rowspan="2">
                    @Html.DisplayNameFor(model => model.Challans[0].ChallanNo)
                </th>
                <th rowspan="2">
                    @Html.DisplayNameFor(model => model.Challans[0].ChallanDate)
                </th>
                <th rowspan="2">
                    @Html.DisplayNameFor(model => model.Challans[0].Size)
                </th>
                <th rowspan="2">
                    @Html.DisplayNameFor(model => model.Challans[0].Schedule)
                </th>
                <th rowspan="2">
                    @Html.DisplayNameFor(model => model.Challans[0].Length)
                </th>
                @*<th>
                        @Html.DisplayNameFor(model => model.Challans[0].C90D_Nos)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Challans[0].C90D_Length)
                    </th>*@
                <th colspan="2">90D</th>
                @*<th>
                        @Html.DisplayNameFor(model => model.Challans[0].C1D_Nos)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Challans[0].C1D_Length)
                    </th>*@
                <th colspan="2">1D</th>
                @*<th>
                        @Html.DisplayNameFor(model => model.Challans[0].C45D_Nos)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Challans[0].C45D_Length)
                    </th>*@
                <th colspan="2">45D</th>
                @*<th>
                        @Html.DisplayNameFor(model => model.Challans[0].Long_Nos)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Challans[0].Long_Length)
                    </th>*@
                <th colspan="2">Long</th>
                @*<th>
                        @Html.DisplayNameFor(model => model.Challans[0].Reducer_Nos)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Challans[0].Reducer_Length)
                    </th>*@
                <th colspan="2">Reducer</th>
                <th rowspan="2">
                    @Html.DisplayNameFor(model => model.Challans[0].Balance_Length)
                </th>
                <th rowspan="2">
                    @Html.DisplayNameFor(model => model.Challans[0].Scrap_Length)
                </th>
                <th rowspan="2">
                    @Html.DisplayNameFor(model => model.Challans[0].Scrap_Date)
                </th>
                <th rowspan="2"></th>
            </tr>
            <tr>
                <th>
                    Nos@*@Html.DisplayNameFor(model => model.Challans[0].C90D_Nos)*@
                </th>
                <th>
                    Len@*@Html.DisplayNameFor(model => model.Challans[0].C90D_Length)*@
                </th>
                <th>
                    Nos@*@Html.DisplayNameFor(model => model.Challans[0].C1D_Nos)*@
                </th>
                <th>
                    Len@*@Html.DisplayNameFor(model => model.Challans[0].C1D_Length)*@
                </th>
                <th>
                    Nos@*@Html.DisplayNameFor(model => model.Challans[0].C45D_Nos)*@
                </th>
                <th>
                    Len@*@Html.DisplayNameFor(model => model.Challans[0].C45D_Length)*@
                </th>
                <th>
                    Nos@*@Html.DisplayNameFor(model => model.Challans[0].Long_Nos)*@
                </th>
                <th>
                    Len@*@Html.DisplayNameFor(model => model.Challans[0].Long_Length)*@
                </th>
                <th>
                    Nos@*@Html.DisplayNameFor(model => model.Challans[0].Reducer_Nos)*@
                </th>
                <th>
                    Len@*@Html.DisplayNameFor(model => model.Challans[0].Reducer_Length)*@
                </th>

            </tr>
            @foreach (var item in Model.Challans)
            {
                <tr>
                    <td>@Html.DisplayFor(modelItem => item.ChallanNo)</td>
                    <td>@Html.DisplayFor(modelItem => item.ChallanDate)</td>
                    <td>@Html.DisplayFor(modelItem => item.Size)</td>
                    <td>@Html.DisplayFor(modelItem => item.Schedule)</td>
                    <td>@Html.DisplayFor(modelItem => item.Length)</td>
                    <td>@Html.DisplayFor(modelItem => item.C90D_Nos)</td>
                    <td>@Html.DisplayFor(modelItem => item.C90D_Length)</td>
                    <td>@Html.DisplayFor(modelItem => item.C1D_Nos)</td>
                    <td>@Html.DisplayFor(modelItem => item.C1D_Length)</td>
                    <td>@Html.DisplayFor(modelItem => item.C45D_Nos)</td>
                    <td>@Html.DisplayFor(modelItem => item.C45D_Length)</td>
                    <td>@Html.DisplayFor(modelItem => item.Long_Nos)</td>
                    <td>@Html.DisplayFor(modelItem => item.Long_Length)</td>
                    <td>@Html.DisplayFor(modelItem => item.Reducer_Nos)</td>
                    <td>@Html.DisplayFor(modelItem => item.Reducer_Length)</td>
                    <td>@Html.DisplayFor(modelItem => item.Balance_Length)</td>
                    <td>@Html.DisplayFor(modelItem => item.Scrap_Length)</td>
                    <td>@Html.DisplayFor(modelItem => item.Scrap_Date)</td>
                    <td>
                        <a href="/Challans/Edit/@item.Id" title="Edit"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
                        @*<a href="/Challans/Details/@item.Id" title="View Detail"><span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span></a>*@
                        <a href="javascript:" title="Delete" onclick="@("if (confirm('Are you sure you want to delete this challan?')) document.getElementById('deleteChallan"+@item.Id+"').submit();")">
                            <span class="glyphicon glyphicon-remove" aria-hidden="true" style="color:#f00;"></span>
                            @using (Html.BeginForm("Delete", "Challans", new { id = item.Id }, FormMethod.Post, new { id = "deleteChallan" + item.Id }))
                            {

                            }
                        </a>
                    </td>
                </tr>
            }
        </table>
    </div>
</div>
<script>
    function changeCustomer(custId) {
        window.location = "/Challans/Index/" + custId;
    }
</script>
